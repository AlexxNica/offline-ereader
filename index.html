<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, minimum-scale=1.0, initial-scale=1.0, user-scalable=yes">
    <title>Offline eReader</title>
    <script src="bower_components/platform/platform.js"></script>
    <link rel="stylesheet" href="styles.css" shim-shadowdom>
    <base target="_blank"></base>
  </head>

  <body unresolved fullbleed>
    <template is="auto-binding" id="t">
      <flatiron-director route="{{route}}"
                         autoHash>
      </flatiron-director>

      <core-a11y-keys id="keys"
                      target="{{parentElement}}"
                      keys="up down left right space space+shift"
                      on-keys-pressed="{{keyHandler}}">
      </core-a11y-keys>

      <core-ajax id="ajax"
                 url="{{selectedPage.page.url}}"
                 handleAs="document"
                 on-core-response="{{onResponse}}">
      </core-ajax>

      <core-scaffold id="scaffold">
        <nav>
          <core-toolbar>
            <span>Offline eReader</span>
          </core-toolbar>

          <core-menu id="menu"
                     valueattr="hash"
                     selected="{{route}}"
                     selectedModel="{{selectedPage}}"
                     on-core-select="{{menuItemSelected}}"
                     on-click="{{ajaxLoad}}">
            <template repeat="{{page in pages}}">
              <paper-item icon="label{{route != page.hash ? '-outline' : ''}}"
                          label="{{page.name}}"
                          hash="{{page.hash}}">
                <a href="{{page.url}}"></a>
              </paper-item>
            </template>
          </core-menu>
        </nav>

        <core-toolbar tool flex>
          <div flex>{{selectedPage.page.name}}</div>
          <core-icon-button icon="refresh"></core-icon-button>
          <core-icon-button icon="add"></core-icon-button>
        </core-toolbar>

        <div layout horizontal center-center fit>
          <core-animated-pages id="pages"
                               selected="{{route}}"
                               valueattr="hash"
                               transitions="slide-from-right">
            <template repeat="{{page in pages}}">
              <section hash="{{page.hash}}" layout vertical center-center>
                <div id="loading">Loading...</div>
              </section>
            </template>
          </core-animated-pages>
        </div>
      </core-scaffold>
    </template>

    <script src="app-ajax.js"></script>
  </body>
</html>
